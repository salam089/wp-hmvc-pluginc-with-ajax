var captcha=angular.module("udpCaptcha",[]);captcha.directive("captcha",function(){return{restrict:"E",template:'Captcha: <span ng-model="field1">{{field1}}</span> <span ng-model="operator">{{operator}}</span> <span ng-model="field2">{{field2}}</span> = ',scope:{field1:"@",field2:"@",operator:"@"}}}),captcha.factory("$captcha",["$rootScope",function(t){return{getOperation:function(){if(t.operators=["+","-","*","/"],t.operator=t.operators[Math.floor(Math.random()*t.operators.length)],$field1=Math.floor(19*Math.random()+6),"/"==t.operator)$num=this.getDivisors($field1),$field2=$num[Math.floor(Math.random()*$num.length)];else for($field2=Math.floor(5*Math.random()+1);$field1<$field2;)$field1=Math.floor(15*Math.random()),$field2=Math.floor(5*Math.random()+1);t.field1=$field1,t.field2=$field2},getDivisors:function(t){1>t&&(t=0);for(var e=[],a=[],o=Math.floor(Math.sqrt(t)),r=1;o>=r;r++)t%r==0&&(e.push(r),r*r!=t&&a.push(t/r));return a.reverse(),e.concat(a)},getResult:function(t,e,a){return"*"==a?t*e:"+"==a?t+e:"/"==a?t/e:t-e},checkResult:function(e){return parseInt(e)==this.getResult(parseInt(t.field1),parseInt(t.field2),t.operator)?!0:void this.getOperation()}}}]),captcha.run(function(t){t.getOperation()});